!function(){"use strict";nhl.ajax={getAndCacheOrGetFromCache:function(t,e){var a=nhl.cache.get(e),n=$.Deferred();return null===a?this.get(t).then(function(t){"string"==typeof t&&(t=JSON.parse(t)),nhl.cache.setWithExpiration(e,t.items,t.nextUpdate),n.resolve(t.items)}):n.resolve(a.value),n.promise()},get:function(t){return $.ajax({url:t,type:"GET",headers:{Accept:"application/json; odata=verbose"},async:!0})}}}(),function(){"use strict";nhl.cache={prefix:"breadman_",set:function(t,e){this.getStorage&&this.getStorage().setItem(this.prefix+t,JSON.stringify(e))},get:function(t){var e=JSON.parse(this.getStorage().getItem(this.prefix+t)),a="localStorageKeyExpires";return e&&e.hasOwnProperty(a)&&new Date(e[a]).getTime()<(new Date).getTime()?(this.remove(t),null):e},setWithExpiration:function(t,e,a){this.getStorage().setItem(this.prefix+t,JSON.stringify({value:e,localStorageKeyExpires:a}))},remove:function(t){this.getStorage().removeItem(t)},getStorage:function(){return localStorage?localStorage:sessionStorage?sessionStorage:void 0},clear:function(){for(var t=[],e=0;e<localStorage.length;e++)localStorage.key(e).substring(0,this.prefix.length)==this.prefix&&t.push(localStorage.key(e));for(var e=0;e<t.length;e++)localStorage.removeItem(t[e])}}}(),function(){"use strict";nhl.component={get:function(t){var e=$('[data-component="'+t+'"]');return e.exists=e.length>0,e}}}(),function(){"use strict";$.fn.nhlTemplate=function(t){var e={templateName:null,data:null,operation:"append",callback:function(){}};t&&($.extend(e,t),$.extend(e.data,t));var a=this;a.init=function(){this.each(function(){var t=$(this),a=nhl.templates[e.templateName],n=a(e.data);"append"===e.operation?t.append(n):t.replaceWith(n),e.callback.call(t)})},a.init()}}(jQuery),function(){"use strict";var t=function(){Handlebars.registerHelper("helperLowerCase",function(t){if(t)return t.toLowerCase()}),Handlebars.registerHelper("toFixed",function(t,e){if(t)return t.toFixed(e)}),Handlebars.registerHelper("fixTeam",function(t){var e=t.toLowerCase();if(e&&e.indexOf(",")){var a=e.split(",");return a[a.length-1]}return e}),Handlebars.registerHelper("hourMinute",function(t){if(moment)return moment(t).format("HH:mm")}),Handlebars.registerHelper("add",function(t,e,a){return t+e+a}),Handlebars.registerHelper("ifCond",function(t,e,a){return t===e?a.fn(this):a.inverse(this)})};t()}(),$(document).ready(function(){"use strict";var t=nhl.component.get("goalies");t.exists&&$.each(t,function(t,e){nhl.ajax.getAndCacheOrGetFromCache("/api/startingGoalies","goalies").done(function(t){$(e).nhlTemplate({templateName:"goalies",data:t,callback:function(){}})})})}),$(document).ready(function(){"use strict";var t=nhl.component.get("highlights");t.exists&&$.each(t,function(t,e){nhl.ajax.getAndCacheOrGetFromCache("/api/highlights","highlights").done(function(t){$(e).nhlTemplate({templateName:"highlights",data:t,callback:function(){var t=$(e).find("[data-spoil]");$(e).find(".show-all").on("click",function(){$(this).parents("[data-container]").find("[data-spoil]").click(),$(this).fadeOut("slow")}),t.on("click",function(t){t.preventDefault();var e=$(this).find(".show-result"),a=$(this).find(".spoiler");e.fadeOut("slow",function(){a.fadeIn("slow")})}),$(e).on("click",'[data-button="iframe"]',function(t){t.preventDefault();var e=$(this).data("url"),a=$(this).data("title");$("#iframe").attr("src",e),$(".modal-title").text(a),$(".modal").on("hidden.bs.modal",function(t){$(".modal").hide(),$(".modal iframe").attr("src","")})})}})})})}),$(document).ready(function(){"use strict";var t=nhl.component.get("injuries");t.exists&&$.each(t,function(t,e){nhl.ajax.getAndCacheOrGetFromCache("/api/injuries","injuries").done(function(t){$(e).nhlTemplate({templateName:"injuries",data:t,callback:function(){}})})})}),$(document).ready(function(){"use strict";var t=nhl.component.get("playoffs");t.exists&&$.each(t,function(t,e){nhl.ajax.getAndCacheOrGetFromCache("/api/ifplayoffswouldstarttoday","playoffs").done(function(t){var a=function(){var t=$(e).find(".team-name"),a=t.length;t.each(function(t){var e=t<a/2?"playoffs-left":"playoffs-right";$(this).addClass($(this).text().toLowerCase()+" playoffs-logo logo-large "+e),$(this).text("")})},n=function(t){var e=[];return i(t.eastern.reverse(),e),e.reverse(),i(t.western,e),e},i=function(t,e){for(var a=0;a<t.length;a++){var n=t[a];e.unshift({name:n.team1.team.name},{name:n.team2.team.name})}return e};$(e).bracket({rectFill:"#0000",bgcolor:"#FFFF",teams:16,topOffset:50,height:"600px",scale:.6,icons:!1,teamNames:n(t)}),a()})})}),$(document).ready(function(){"use strict";var t=nhl.component.get("standings");t.exists&&$.each(t,function(t,e){var a=function(t,n){nhl.ajax.getAndCacheOrGetFromCache("/api/"+n,n).done(function(i){$(e).empty(),$(e).nhlTemplate({templateName:t,data:i,callback:function(){var t=$(e).find("#type");t.selectpicker(),t.val(n).change(),t.on("change",function(){"wildcardstandings"===$(this).val()?a("standings-wildcard","wildcardstandings"):a("standings-division","divisionstandings")})}})})};a("standings-wildcard","wildcardstandings")})}),$(document).ready(function(){"use strict";var t=nhl.component.get("stats");t.exists&&$.each(t,function(t,e){var a=50,n=function(t){nhl.ajax.get("/api/getStats?"+$.param(t),"stats").then(function(i){i=i.items,i.start=t.startPage*a-a,$(e).empty(),$(e).nhlTemplate({templateName:"stats",data:i,callback:function(){var e=$("#sortby");e.selectpicker(),$('[data-change="prev"]').on("click",function(){t.startPage>1&&n({startPage:t.startPage-1,limit:a,sortOrder:t.sortOrder})}),$('[data-change="next"]').on("click",function(){var e=50;i.total/e>t.startPage&&n({startPage:t.startPage+1,limit:a,sortOrder:t.sortOrder})}),e.val(t.sortOrder).change(),e.on("change",function(){n({startPage:1,limit:a,sortOrder:$(this).val()})})}})})};n({startPage:1,limit:a,sortOrder:"points"})})});