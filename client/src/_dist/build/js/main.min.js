!function(){"use strict";nhl.ajax={getAndCacheOrGetFromCache:function(t,e){var n=nhl.cache.get(e),a=$.Deferred();return null===n?this.get(t).then(function(t){"string"==typeof t&&(t=JSON.parse(t)),nhl.cache.setWithExpiration(e,t.items,t.nextUpdate),a.resolve(t.items)}):a.resolve(n.value),a.promise()},get:function(t){return $.ajax({url:t,type:"GET",headers:{Accept:"application/json; odata=verbose"},async:!0})}}}(),function(){"use strict";nhl.cache={prefix:"breadman_",set:function(t,e){localStorage.setItem(this.prefix+t,JSON.stringify(e))},get:function(t){var e=JSON.parse(localStorage.getItem(this.prefix+t)),n="localStorageKeyExpires";return e&&e.hasOwnProperty(n)&&new Date(e[n]).getTime()<(new Date).getTime()?(this.remove(t),null):e},setWithExpiration:function(t,e,n){localStorage.setItem(this.prefix+t,JSON.stringify({value:e,localStorageKeyExpires:n}))},remove:function(t){localStorage.removeItem(t)},clear:function(){for(var t=[],e=0;e<localStorage.length;e++)localStorage.key(e).substring(0,this.prefix.length)==this.prefix&&t.push(localStorage.key(e));for(var e=0;e<t.length;e++)localStorage.removeItem(t[e])}}}(),function(){"use strict";nhl.component={get:function(t){var e=$('[data-component="'+t+'"]');return e.exists=e.length>0,e}}}(),function(){"use strict";$.fn.nhlTemplate=function(t){var e={templateName:null,data:null,operation:"append",callback:function(){}};t&&($.extend(e,t),$.extend(e.data,t));var n=this;n.init=function(){this.each(function(){var t=$(this),n=nhl.templates[e.templateName],a=n(e.data);"append"===e.operation?t.append(a):t.replaceWith(a),e.callback.call(t)})},n.init()}}(jQuery),$(document).ready(function(){"use strict";var t=nhl.component.get("goalies");t.exists&&$.each(t,function(t,e){nhl.ajax.getAndCacheOrGetFromCache("/api/startingGoalies","goalies").done(function(t){$(e).nhlTemplate({templateName:"goalies",data:t,callback:function(){}})})})}),$(document).ready(function(){"use strict";var t=nhl.component.get("highlights");t.exists&&$.each(t,function(t,e){nhl.ajax.getAndCacheOrGetFromCache("/api/highlights","highlights").done(function(t){$(e).nhlTemplate({templateName:"highlights",data:t,callback:function(){var t=$(e).find("[data-spoil]");$(e).find(".show-all").on("click",function(){$(this).parents("[data-container]").find("[data-spoil]").click()}),t.on("click",function(t){t.preventDefault();var e=$(this).find(".show-result"),n=$(this).find(".spoiler");e.fadeOut("slow",function(){n.fadeIn("slow")})}),$(e).on("click",'[data-button="iframe"]',function(t){t.preventDefault();var e=$(this).data("url"),n=$(this).data("title");$("#iframe").attr("src",e),$(".modal-title").text(n),$(".modal").on("hidden.bs.modal",function(t){$(".modal").hide(),$(".modal iframe").attr("src","")})})}})})})}),$(document).ready(function(){"use strict";var t=nhl.component.get("injuries");t.exists&&$.each(t,function(t,e){nhl.ajax.getAndCacheOrGetFromCache("/api/injuries","injuries").done(function(t){$(e).nhlTemplate({templateName:"injuries",data:t,callback:function(){}})})})}),$(document).ready(function(){"use strict";var t=nhl.component.get("playoffs");t.exists&&$.each(t,function(t,e){nhl.ajax.getAndCacheOrGetFromCache("/api/ifplayoffswouldstarttoday","playoffs").done(function(t){var n=function(){var t=$(e).find(".team-name"),n=t.length;t.each(function(t){var e=t<n/2?"playoffs-left":"playoffs-right";$(this).addClass($(this).text().toLowerCase()+" playoffs-logo "+e),$(this).text("")})},a=function(t){var e=[];return i(t.eastern.reverse(),e),e.reverse(),i(t.western,e),e},i=function(t,e){for(var n=0;n<t.length;n++){var a=t[n];e.unshift({name:a.team1.team.name},{name:a.team2.team.name})}return e};$(e).bracket({rectFill:"#0000",bgcolor:"#FFFF",teams:16,topOffset:50,height:"600px",scale:.6,icons:!1,teamNames:a(t)}),n()})})}),$(document).ready(function(){"use strict";var t=nhl.component.get("standings");t.exists&&$.each(t,function(t,e){var n=function(t,a){nhl.ajax.getAndCacheOrGetFromCache("/api/"+a,a).done(function(i){$(e).empty(),$(e).nhlTemplate({templateName:t,data:i,callback:function(){var t=$(e).find("#type");t.selectpicker(),t.val(a).change(),t.on("change",function(){"wildcardstandings"===$(this).val()?n("standings-wildcard","wildcardstandings"):n("standings-division","divisionstandings")})}})})};n("standings-wildcard","wildcardstandings")})}),$(document).ready(function(){"use strict";var t=nhl.component.get("stats");t.exists&&$.each(t,function(t,e){var n=function(t){nhl.ajax.get("/api/getStats?"+$.param(t),"stats").then(function(a){a=a.items,$(e).empty(),$(e).nhlTemplate({templateName:"stats",data:a,callback:function(){var i=$("#sortby");i.selectpicker(),$('[data-change="prev"]').on("click",function(){t.startPage>1&&n({startPage:t.startPage-1,limit:50,sortOrder:t.sortOrder})}),$('[data-change="next"]').on("click",function(){var e=50;a.total/e>t.startPage&&n({startPage:t.startPage+1,limit:50,sortOrder:t.sortOrder})}),i.val(t.sortOrder).change(),$(e).find("#sortingtext").text($("#sortby option:selected").text()),i.on("change",function(){n({startPage:1,limit:50,sortOrder:$(this).val()})})}})})};n({startPage:1,limit:50,sortOrder:"points"})})}),function(){"use strict";var t=function(){Handlebars.registerHelper("helperLowerCase",function(t){if(t)return t.toLowerCase()}),Handlebars.registerHelper("toFixed",function(t,e){if(t)return t.toFixed(e)}),Handlebars.registerHelper("fixTeam",function(t){var e=t.toLowerCase();if(e&&e.indexOf(",")){var n=e.split(",");return n[n.length-1]}return e}),Handlebars.registerHelper("hourMinute",function(t){if(moment)return moment(t).format("HH:mm")}),Handlebars.registerHelper("ifCond",function(t,e,n){return t===e?n.fn(this):n.inverse(this)})};t()}();